include ../layout.pug


block content
h1 Settings
a(href="accounts/profile") Profile Settings  | 
a(href="accounts/admin-settings") Admin Settings 

h2 All Admins

table
		thead
			tr
				td First Name
				td Last Name
				td Email
				td Remove Admin Access
		tbody
		each admin in admins
			tr
				td= admin.name.first
				td= admin.name.last
				td= admin.email
				td
					input(type="checkbox" name="admin" data-user=`${admin._id}`)

h2 All Users

table
		thead
			tr
				td First Name
				td Last Name
				td Email
				td Add Admin Access
		tbody
		each nonAdmin in nonAdmins
			tr
				td= nonAdmin.name.first
				td= nonAdmin.name.last
				td= nonAdmin.email
				td
					input(type="checkbox" name="admin" data-user=`${nonAdmin._id}`)

block footer-scripts
	script.
		function changeAdmin(e) {
			var User = $(this).data('user');
			var request = $.ajax({
				url: '/accounts/adminChange',
				data: {User},
				type: 'POST'
			});
			request.done((res)=>{
				console.log(res)
			});
			request.fail((res) => {
				console.log("ERROR", res)
			});
		}

		$('input:checkbox').on('click', changeAdmin);